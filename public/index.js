/* global PIXI */
/// <reference types="pixi.js" />

let app = new PIXI.Application(),
    loader = PIXI.loader,
    resources = PIXI.loader.resources,
    Sprite = PIXI.Sprite;

// add canvas to the HTML generated by PIXI
document.body.appendChild(app.view);

const bg = PIXI.Texture.fromImage("sprites/bg.png");
let background = new PIXI.extras.TilingSprite(bg, 800, 600);
app.stage.addChild(background);

app.ticker.add(() => {
    background.tileScale.set(0.58);
    background.tilePosition.x -= 2;
});

const initialPositionX = 50;
const floor = 500;
const jumpDelay = 500;
const jumpHeight = 90;

// main character
let player = PIXI.Sprite.fromImage("sprites/player1.png");

player.position.set(initialPositionX, floor);

app.stage.addChild(player);

window.addEventListener("keydown", event => {
    if (event.keyCode === 38) {
        player.position.y -= jumpHeight;
    }
    setTimeout(() => {
        player.position.y = floor;
    }, jumpDelay);
});

// enemy
let enemy = PIXI.Sprite.fromImage("sprites/enemy.png");
enemy.position.set(700, floor);

app.ticker.add(() => {
    enemy.position.x -= 8;

    if (enemy.position.x < -120) {
        enemy.position.x = 1000;
    }
});

app.stage.addChild(enemy);
